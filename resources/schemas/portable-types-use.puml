@startuml portable-types-use

skinparam interface<<trait>> {
  BackgroundColor lightblue
  BorderColor blue
  StereotypeFontColor blue
}

package "shared" {

    interface PortableTypes << (T,#b2a7e0) trait >> {
        +type Map[K, V]
        +given [K, V] => Iso[Map[K, V], collection.Map[K, V]]
        ---
        +type Function1[T1, R]
        +given [T1, R] => Iso[Function1[T1, R], T1 => R]
        ---
        ...
    }
    note top of PortableTypes
        Portable types among different languages, 
        along with their Scala isomorphisms.
    end note

    interface PortableLibrary << (T,#b2a7e0) trait >> {
        portable library API definitions
    }
    PortableLibrary *-left-> PortableTypes : mixed in
    note top of PortableLibrary
        Base trait for all portable library definitions.
        **All the exported APIs must use**
        **only portable types.**
    end note
}

package "native" {
    interface NativeTypes << (T,#b2a7e0) trait >>
    shared.PortableTypes <|--- NativeTypes
    class NativeLibrary
    shared.PortableLibrary <|.. NativeLibrary
    NativeLibrary .left.|> NativeTypes
}

package "js" {
    interface JSTypes << (T,#b2a7e0) trait >>
    shared.PortableTypes <|--- JSTypes
    class JSLibrary
    shared.PortableLibrary <|.. JSLibrary
    JSLibrary .left.|> JSTypes
}

package "jvm" {
    interface JVMTypes << (T,#b2a7e0) trait >>
    shared.PortableTypes <|--- JVMTypes
    class JVMLibrary
    shared.PortableLibrary <|.. JVMLibrary
    JVMLibrary .left.|> JVMTypes
}

note "Platform-specific libraries entry points" as N
NativeLibrary .. N
JSLibrary .. N
JVMLibrary .. N

@enduml